---
title: "Labour market indicators"
output: 
  flexdashboard::flex_dashboard:
    vertical_layout: scroll
    orientation: rows
---
  
```{r setup, include = FALSE}

knitr::opts_chunk$set(
	echo = FALSE,
	message = FALSE,
	warning = FALSE
)

knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file())

```

```{r prep_data}

library(highcharter)
charts_r <- readRDS("data/charts_labourmarket.rds")[["regions"]]
charts_c <- readRDS("data/charts_labourmarket.rds")[["constituencies"]]
charts_emp <- readRDS("data/charts_labourmarket.rds")[["regions_emp"]]
charts_inact <- readRDS("data/charts_labourmarket.rds")[["regions_inact"]]
regions <- names(charts_r)

```

- **Employment rate** - The proportion of 16-65 year-olds who are employed or self-employed
- **Unemployment rate** - The proportion of 16+ year-olds who are currently unemployed, i.e. they are looking for work
- **Inactivity rate** - The proportion of 16-65 year-olds who are currently not employed or self-employed and are not actively looking for work.

The data is updated quarterly by the Office for National Statistics via the [Labour Force Survey](https://www.ons.gov.uk/employmentandlabourmarket/peopleinwork/employmentandemployeetypes/bulletins/regionallabourmarket/september2023). The shaded areas show measurement uncertainty (where available). Missing data is shown as gaps. Due to small numbers, unemployment rates are not available on a constituency-level.

```{r, results='asis'}

# add layout and charts by looping through regions

src = lapply(seq_along(regions), function(x) {
  x <- regions[x]
  knitr::knit_expand('dashboard/layouts/labourmarket_layout.Rmd')
})

res = knitr::knit_child(text = unlist(src), quiet = TRUE)
cat(res, sep = '\n')

```
